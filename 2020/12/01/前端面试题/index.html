

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.jpg">
  <link rel="icon" type="image/png" href="/img/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="LQX">
  <meta name="keywords" content="">
  <title>å‰ç«¯é¢è¯•é¢˜1 - QX97</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_6peoq002giu.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.1.1"></head>


<body>
  <header style="height: 40vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>QX97</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/xmind/">
                <i class="iconfont icon-slack-fill"></i>
                æ€ç»´å¯¼å›¾
              </a>
            </li>
          
        
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
                å‰ç«¯é¢è¯•é¢˜1
              
            </span>

            
              

<div class="mt-1">
  

             <div class="post-meta mr-2">
                
                  <div>
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/vue/">vue</a>
                    
                      <a class="hover-with-bg" href="/tags/js/">js</a>
                    
                      <a class="hover-with-bg" href="/tags/web/">web</a>
                    
                      <a class="hover-with-bg" href="/tags/react/">react</a>
                    
                  </div>
                
              </div>

  

  
  
    
      <!-- LeanCloud ç»Ÿè®¡æ–‡ç« PV -->
      <span id="leancloud-post-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-post-views"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="font-size: 2rem;">å‰ç«¯é¢è¯•é¢˜1</h1>
            
              <p class="new-note">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2020-12-17 20:50:17
                
              </p>
            
            <div class="markdown-body" id="post-body">
              <h3 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h3><blockquote>
<p>å†™ä¸€ä¸ªmySetInterVal(fn, a, b)ï¼Œæ¯æ¬¡é—´éš”a, a+b, a+2bçš„æ—¶é—´ï¼Œç„¶åå†™ä¸€ä¸ªmyClearï¼Œåœæ­¢ä¸Šé¢çš„mySetInterval</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>
<span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mySetInterval</span>(<span class="hljs-params">fn, a, b</span>) </span>&#123;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subSetInterval</span>(<span class="hljs-params"></span>) </span>&#123;
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
      fn()
      count++
      subSetInterval()
    &#125;, a + count * b)
  &#125;
  subSetInterval()
&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myClear</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-built_in">clearTimeout</span>(timer)
&#125;</code></pre>

<h3 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h3><blockquote>
<p>åˆå¹¶äºŒç»´æœ‰åºæ•°ç»„ç»„æˆä¸€ç»´æœ‰åºæ•°ç»„ï¼Œå½’å¹¶æ’åºçš„æ€è·¯</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>(<span class="hljs-params">arr1, arr2</span>) </span>&#123;
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>,
    j = <span class="hljs-number">0</span>,
    len1 = arr1.length,
    len2 = arr2.length,
    res = []
  <span class="hljs-keyword">while</span> (i &lt; len1 &amp;&amp; j &lt; len2) &#123;
    <span class="hljs-keyword">if</span> (arr1[i] &lt; arr2[j]) &#123;
      res.push(arr1[i++])
    &#125; <span class="hljs-keyword">else</span> &#123;
      res.push(arr2[j++])
    &#125;
  &#125;
  <span class="hljs-keyword">if</span> (i &lt; len1) res = res.concat(arr1.slice(i))
  <span class="hljs-keyword">if</span> (j &lt; len2) res = res.concat(arr2.slice(j))
  <span class="hljs-keyword">return</span> res
&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">const</span> len = arr.length
  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> arr
  <span class="hljs-keyword">let</span> mid = <span class="hljs-built_in">Math</span>.floor(len / <span class="hljs-number">2</span>)
  <span class="hljs-keyword">return</span> merge(mergeSort(arr.slice(<span class="hljs-number">0</span>, mid)), mergeSort(arr.slice(mid)))
&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myMergeSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">let</span> narr = arr.flat(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">return</span> mergeSort(narr)
&#125;</code></pre>

<h3 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h3><blockquote>
<p>å¤šç§æ–¹å¼å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">1</span> || n === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> n
  <span class="hljs-keyword">return</span> fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>)
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>) </span>&#123;
  <span class="hljs-keyword">let</span> pre = <span class="hljs-number">1</span>,
    cur = <span class="hljs-number">1</span>,
    result = <span class="hljs-number">0</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">3</span>; i &lt; n; i++) &#123;
    result = pre + cur
    pre = cur
    cur = result
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;</code></pre>

<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><blockquote>
<p>å­—ç¬¦ä¸²å‡ºç°çš„ä¸é‡å¤çš„æœ€é•¿é•¿åº¦</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lengthOfLongestString</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">let</span> temp = <span class="hljs-string">&#x27;&#x27;</span>
  <span class="hljs-keyword">let</span> res = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; i &lt; str.length; i++, j++) &#123;
    <span class="hljs-keyword">if</span> (!temp) temp += str[i]
    <span class="hljs-keyword">let</span> index = temp.indexOf(str[i])
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) &#123;
      res.push(temp)
      temp = temp.slice(index + <span class="hljs-number">1</span>) + str[i]
    &#125; <span class="hljs-keyword">else</span> &#123;
      temp += str[i]
    &#125;
  &#125;
  <span class="hljs-built_in">console</span>.log(res)
  <span class="hljs-keyword">if</span> (!res) &#123;
    <span class="hljs-keyword">return</span> str.length
  &#125; <span class="hljs-keyword">else</span> &#123;
    res = res.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.length - a.length)
    <span class="hljs-keyword">return</span> res[<span class="hljs-number">0</span>].length
  &#125;
&#125;</code></pre>

<h3 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h3><blockquote>
<p>ä»‹ç»Chromeçš„å‡ ä¸ªç‰ˆæœ¬</p>
</blockquote>
<p><code>Chrome</code>æµè§ˆå™¨æä¾›4ç§å‘å¸ƒç‰ˆæœ¬ï¼Œç¨³å®šç‰ˆ<code>stable</code>,æµ‹è¯•ç‰ˆ<code>Beta</code>,å¼€å‘è€…ç‰ˆ<code>Dev</code>,é‡‘ä¸é›€ç‰ˆ<code>Canary</code>ã€‚</p>
<p>é‡‘ä¸é›€ç‰ˆåªé™ç”¨äºæµ‹è¯•ã€‚æ˜¯åŠŸèƒ½ä»£ç æœ€å…ˆè¿›çš„ç‰ˆæœ¬ï¼Œé€‚åˆè¿›é˜¶ç”¨æˆ·å®‰è£…å¤‡ç”¨ï¼Œå°é²œæœ€æ–°åŠŸèƒ½ï¼Œå¹¶ä¸é€‚åˆæ—¥å¸¸ä½¿ç”¨ã€‚</p>
<p>å¼€å‘ç‰ˆæ¯å‘¨æ›´æ–°ä¸€æ¬¡ï¼Œå‹‰å¼ºæ»¡è¶³æ—¥å¸¸ä½¿ç”¨ï¼Œé€‚åˆWebå¼€å‘è€…ç”¨æ¥æµ‹è¯•æ–°åŠŸèƒ½å’Œç½‘é¡µï¼Œæå‰æµ‹è¯•åº”ç”¨å…¼å®¹æ€§ã€‚</p>
<p>æµ‹è¯•ç‰ˆæ¯æœˆæ›´æ–°ä¸€æ¬¡ï¼Œæ˜¯æ­£å¼å‘å¸ƒå‰çš„æœ€åæµ‹è¯•ç‰ˆæœ¬ï¼Œæ™®é€šç”¨æˆ·æ—¥å¸¸å¯ä½¿ç”¨ã€‚æµ‹è¯•ç‰ˆç”¨æˆ·æå‰4-6å‘¨ä½“éªŒæ–°åŠŸèƒ½ï¼Œå¯ä»¥å‘ç°ç‰¹å®šç‰ˆæœ¬å¯èƒ½å­˜åœ¨çš„é—®é¢˜ã€‚</p>
<p>ç¨³å®šç‰ˆä»¥æµ‹è¯•ç‰ˆä¸ºåŸºç¡€ï¼Œæ˜¯ç¨³å®šæ€§æœ€é«˜çš„<code>Chrome</code>ç‰ˆæœ¬ã€‚</p>
<h3 id="HTTPç¼“å­˜"><a href="#HTTPç¼“å­˜" class="headerlink" title="HTTPç¼“å­˜"></a>HTTPç¼“å­˜</h3><p>æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å­˜ä¸­æŸ¥æ‰¾ç»“æœä»¥åŠç¼“å­˜æ ‡è¯†ï¼Œæ ¹æ®ç¼“å­˜æ ‡è¯†åˆ¤æ–­æ˜¯å¦ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦‚æœç¼“å­˜æœ‰æ•ˆï¼Œåˆ™ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼›å¦åˆ™å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚å¹¶æºå¸¦ç¼“å­˜æ ‡è¯†ã€‚</p>
<p>æ ¹æ®æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨å‘èµ·<code>http</code>è¯·æ±‚ï¼Œå°†ç¼“å­˜è¿‡ç¨‹åˆ’åˆ†ä¸º2ä¸ªéƒ¨åˆ†ï¼š</p>
<p>å¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºåå•†ç¼“å­˜ã€‚</p>
<p>å¼ºç¼“å­˜ï¼šæœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…ï¼Œä¸‹æ¬¡è¯·æ±‚åˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸åœ¨æ—¶é—´å†…ï¼Œåˆ™å®è¡Œåå•†ç¼“å­˜ç­–ç•¥ã€‚</p>
<p>åå•†ç¼“å­˜ï¼šè®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´èƒ½å®ç°ç¼“å­˜æ–‡ä»¶æ˜¯å¦æ›´æ–°çš„éªŒè¯ï¼Œæå‡ç¼“å­˜å¤ç”¨ç‡ï¼Œå°†ç¼“å­˜å“åº”ä¿¡æ¯ä¸­çš„<code>ETag</code>å’Œ<code>Last-Modified</code>ã€‚</p>
<p><code>HTTP</code>ç¼“å­˜ä»ç¬¬äºŒæ¬¡è¯·æ±‚å¼€å§‹ã€‚</p>
<p>å¯¹äºå¼ºåˆ¶ç¼“å­˜æ¥è¯´ï¼Œ<code>response header</code>ä¸­ä¼šæœ‰2ä¸ªå­—æ®µæ ‡æ˜å¤±æ•ˆè§„åˆ™ï¼ˆ<code>Expires(http1.0)/Cache-Control(http1.1)</code>ã€‚<code>Expires</code>çš„å€¼ä¸ºæœåŠ¡ç«¯è¿”å›çš„åˆ°æœŸæ—¶é—´ï¼Œç”±äºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¯èƒ½å­˜åœ¨çš„æ—¶é—´åå·®ï¼Œå¯¼è‡´ç¼“å­˜å‘½ä¸­è¯¯å·®ï¼Œåœ¨<code>HTTP1.1</code>ç‰ˆæœ¬ä¸­ä½¿ç”¨<code>Cache-Control</code>æ›¿ä»£ã€‚<code>Cache-Control</code>å¸¸è§å–å€¼æœ‰ï¼š</p>
<p><code>private</code>ï¼šå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ã€‚</p>
<p><code>public</code>ï¼šå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨å‡å¯ç¼“å­˜ã€‚</p>
<p><code>max-age=xxx</code>ï¼šç¼“å­˜çš„å†…å®¹å°†åœ¨xxxç§’åå¤±æ•ˆ</p>
<p><code>no-cache</code>ï¼šéœ€è¦ä½¿ç”¨åå•†ç¼“å­˜éªŒè¯ç¼“å­˜æ•°æ®</p>
<p><code>no-store</code>ï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜éƒ½ä¸ä¼šè¢«è§¦å‘</p>
<p>å¼ºåˆ¶ç¼“å­˜çš„å¼Šç«¯å¾ˆæ˜æ˜¾ã€‚æ¯æ¬¡æ ¹æ®è¿‡æœŸæ—¶é—´åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸã€‚ä½†æ˜¯åœ¨åˆ°è¾¾è¿‡æœŸæ—¶é—´åï¼Œæ–‡ä»¶æœ‰å¯èƒ½å¹¶æœªæ”¹å˜ï¼Œä½†ä¾ç„¶éœ€è¦é‡æ–°è¯·æ±‚èµ„æºã€‚åå•†ç¼“å­˜åˆ™å¯ä»¥ä½œä¸ºè¡¥å……æ–¹æ¡ˆã€‚</p>
<p>å½“æœåŠ¡å™¨è¿”å›èµ„æºæ–‡ä»¶æ—¶ï¼Œåœ¨<code>response header</code>ä¸­è¿”å›æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„æœ€è¿‘ä¿®æ”¹æ—¶é—´<code>Last-Modified</code>ï¼Œå½“ç¼“å­˜æ–‡ä»¶è¿‡æœŸï¼Œæµè§ˆå™¨åœ¨<code>request header</code>ä¸­å¸¦ä¸Šå‚æ•°<code>If-Last-Modified=(ä¸Šä¸€æ¬¡è¿”å›çš„Last-Modified)</code>ï¼ŒæœåŠ¡å™¨æ¯”è¾ƒ<code>If-Last-Modified</code>ä¸æ–‡ä»¶ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ï¼Œä¸€è‡´åˆ™è¿”å›304ï¼Œæµè§ˆå™¨ä»ç„¶ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™é‡æ–°è¿”å›æ–‡ä»¶èµ„æºï¼ŒåŒæ—¶æ›´æ–°<code>Last-Modified</code>ã€‚</p>
<p>ä½†ç”±äº<code>Last-Modified</code>ä¿®æ”¹æ—¶é—´åªèƒ½ç²¾ç¡®åˆ°ç§’ï¼Œå¦‚æœæ–‡ä»¶åœ¨ä¸€ç§’å†…å¤šæ¬¡ä¿®æ”¹ï¼ŒæœåŠ¡å™¨å¹¶ä¸èƒ½æ•æ‰åˆ°è¯¥æ”¹åŠ¨ï¼Œæµè§ˆå™¨å°†æ— æ³•è·å–æœ€æ–°æ–‡ä»¶èµ„æºã€‚åŒæ—¶å¦‚æœæœåŠ¡å™¨ä¸Šæ–‡ä»¶è¢«å¤šæ¬¡ä¿®æ”¹ä½†æ–‡ä»¶å†…å®¹ä¸å˜ï¼ŒæœåŠ¡å™¨ä¹Ÿéœ€è¦å¤šæ¬¡é‡æ–°è¿”å›æ–‡ä»¶èµ„æºã€‚</p>
<p>ä¸ºäº†è§£å†³æ–‡ä»¶ä¿®æ”¹æ—¶é—´ä¸ç²¾ç¡®å¸¦æ¥çš„é—®é¢˜ï¼Œå¼•å…¥<code>ETag</code>ã€‚<code>ETag</code>åŸºäºèµ„æºçš„å†…å®¹ç¼–ç ç”Ÿæˆä¸€ä¸²æ ‡è¯†å­—ç¬¦ä¸²ï¼Œå†…å®¹ä¸åŒ<code>ETag</code>ä¸åŒã€‚å½“æœåŠ¡å™¨è¿”å›èµ„æºæ–‡ä»¶æ—¶ï¼Œåœ¨<code>response header</code>ä¸­è¿”å›æ–‡ä»¶å”¯ä¸€æ ‡è¯†<code>ETag</code>ï¼Œå½“ç¼“å­˜æ–‡ä»¶è¿‡æœŸï¼Œæµè§ˆå™¨åœ¨<code>request header</code>ä¸­å¸¦ä¸Šå‚æ•°<code>If-None-Match=(ä¸Šä¸€æ¬¡è¿”å›çš„ETag)</code>ï¼ŒæœåŠ¡å™¨æ¯”è¾ƒ<code>If-None-Match</code>ä¸æ–‡ä»¶çš„<code>ETag</code>ï¼Œä¸€è‡´åˆ™è¿”å›304ï¼Œæµè§ˆå™¨ä»ç„¶ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™é‡æ–°è¿”å›æ–‡ä»¶èµ„æºï¼ŒåŒæ—¶æ›´æ–°<code>ETag</code>ã€‚</p>
<center> 
  <img src="/img/httpç¼“å­˜æœºåˆ¶.jpg" srcset="/img/loading.gif"> 
  <div style="display: inline-block; color: #afb2b5; padding: 15px; font-size: 0.9rem;">
    httpç¼“å­˜æœºåˆ¶.jpg
  </div> 
</center>

<h3 id="é˜²æŠ–èŠ‚æµ"><a href="#é˜²æŠ–èŠ‚æµ" class="headerlink" title="é˜²æŠ–èŠ‚æµ"></a>é˜²æŠ–èŠ‚æµ</h3><p>å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµæ˜¯ä¼˜åŒ–é«˜é¢‘ç‡æ‰§è¡ŒJSä»£ç çš„ä¸€ç§æ‰‹æ®µã€‚</p>
<p>é˜²æŠ–ï¼šåœ¨äº‹ä»¶è¢«è§¦å‘Nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨Nç§’è¢«äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚ä½¿ç”¨åœºæ™¯ï¼šæŒ‰é’®æäº¤ï¼Œå¤šæ¬¡ç‚¹å‡»æŒ‰é’®åªæ‰§è¡Œæœ€åä¸€æ¬¡æäº¤ï¼›æœç´¢æ¡†è¾“å…¥ï¼Œå¤šæ¬¡è¾“å…¥åªæ‰§è¡Œæœ€åä¸€æ¬¡è¾“å…¥ã€‚</p>
<p>èŠ‚æµï¼šåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœåœ¨å•ä½æ—¶é—´å†…å¤šæ¬¡è§¦å‘ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚ä½¿ç”¨åœºæ™¯ï¼šæ‹–æ‹½åœºæ™¯ï¼Œç¼©æ”¾åœºæ™¯ï¼Œè§„å®šæ—¶é—´å†…æ‹–æ‹½å’Œç¼©æ”¾åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œé˜²æ­¢é«˜é¢‘åˆ·æ–°ã€‚</p>
<pre><code class="hljs js"><span class="hljs-comment">// é˜²æŠ–</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">fn, delay = <span class="hljs-number">1000</span>, immediate = false</span>) </span>&#123;
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer)
    <span class="hljs-keyword">if</span> (immediate &amp;&amp; !timer) &#123;
      fn.call(<span class="hljs-built_in">this</span>, ...args)
    &#125;
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
      fn.call(<span class="hljs-built_in">this</span>, ...args)
      timer = <span class="hljs-literal">null</span>
    &#125;, delay)
  &#125;
&#125;

<span class="hljs-comment">// èŠ‚æµ--å®šæ—¶å™¨</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">fn, delay</span>) </span>&#123;
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (!timer) &#123;
      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
        fn.call(<span class="hljs-built_in">this</span>, ...args)
      &#125;, delay)
    &#125;
  &#125;
&#125;

<span class="hljs-comment">// èŠ‚æµ--æ—¶é—´æˆ³</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">fn, delay</span>) </span>&#123;
  <span class="hljs-keyword">let</span> previous = <span class="hljs-number">0</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">let</span> now = <span class="hljs-built_in">Date</span>.now()
    <span class="hljs-keyword">if</span> (now - previous &gt; wait) &#123;
      fn.call(<span class="hljs-built_in">this</span>, ...args)
      previous = now
    &#125;
  &#125;
&#125;</code></pre>

<h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><blockquote>
<p>å¯¹é—­åŒ…çš„çœ‹æ³•ï¼Œä¸ºä»€ä¹ˆè¦ç”¨é—­åŒ…ï¼Ÿé—­åŒ…åŸç†åŠåº”ç”¨åœºæ™¯ï¼Ÿ</p>
</blockquote>
<p>é—­åŒ…å¯ä»¥ä»å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œä¸”è®¿é—®åˆ°çš„å˜é‡é•¿æœŸé©»æ‰åœ¨å†…å­˜ä¸­ï¼Œå¯ä¾›ä¹‹åä½¿ç”¨ã€‚</p>
<p>å¯¹å†…å­˜æ¶ˆè€—æœ‰è´Ÿé¢å½±å“ã€‚å¯¹å¤„ç†é€Ÿåº¦æœ‰è´Ÿé¢å½±å“ã€‚</p>
<pre><code class="hljs js"><span class="hljs-comment">// é˜²æ­¢å˜é‡æ±¡æŸ“</span>
<span class="hljs-keyword">var</span> myFun = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> foo = <span class="hljs-number">0</span>
  <span class="hljs-keyword">return</span> foo
&#125;)()

<span class="hljs-comment">// é˜²æ­¢å–åˆ°æ„å¤–å€¼</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;
  ;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(i)
  &#125;)(i)
&#125;</code></pre>

<h3 id="ä¼ªç±»ä¼ªå…ƒç´ "><a href="#ä¼ªç±»ä¼ªå…ƒç´ " class="headerlink" title="ä¼ªç±»ä¼ªå…ƒç´ "></a>ä¼ªç±»ä¼ªå…ƒç´ </h3><blockquote>
<p>cssä¼ªç±»å’Œé­å…ƒç´ çš„åŒºåˆ«</p>
</blockquote>
<p>ä¼ªç±»ï¼šåŸºäºæ–‡æ¡£ä¹‹å¤–çš„æŠ½è±¡ã€‚<code>:hover/:active/:visited</code></p>
<p>ä¼ªå…ƒç´ ï¼šåŸºäºå…ƒç´ çš„æŠ½è±¡ï¼Œä¸å­˜åœ¨äºæ–‡æ¡£ä¸­ã€‚<code>::before/::after</code></p>
<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><blockquote>
<p>æœ‰ä¸€å †æ•´æ•°ï¼Œå°†å…¶åˆ†ä¸ºä¸‰ä»½ï¼Œç¡®ä¿æ¯ä¸€ä»½ä¹‹å’Œå°½é‡ç›¸ç­‰</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">arr, count</span>) </span>&#123;
  arr.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b - a)
  <span class="hljs-keyword">const</span> total = arr.reduce(<span class="hljs-function">(<span class="hljs-params">pre, cur</span>) =&gt;</span> pre + cur)
  <span class="hljs-keyword">const</span> average = total / <span class="hljs-number">3</span>
  <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(count).fill([])
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count - <span class="hljs-number">1</span>; i++) &#123;
    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>,
      tempRes = []
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; arr.length; ) &#123;
      <span class="hljs-keyword">if</span> (sum + arr[j] &lt;= average) &#123;
        sum += arr[j]
        tempRes.push(arr[j])
        arr.splice(j, <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        j++
      &#125;
    &#125;
    res[i] = tempRes
  &#125;
  res[count - <span class="hljs-number">1</span>] = arr
  <span class="hljs-keyword">return</span> res
&#125;</code></pre>

<h3 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å‡½æ•°æŸ¯é‡ŒåŒ–</h3><blockquote>
<p>å®ç°add(1)(2)(3)</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curry</span>(<span class="hljs-params">fn</span>) </span>&#123;
  <span class="hljs-keyword">let</span> totalArgs = []
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (args.length &gt; <span class="hljs-number">0</span>) &#123;
      totalArgs = totalArgs.concat(args)
      <span class="hljs-keyword">return</span> foo
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">let</span> val = fn.call(<span class="hljs-built_in">this</span>, ...totalArgs)
      totalArgs = []
      <span class="hljs-keyword">return</span> val
    &#125;
  &#125;
&#125;
<span class="hljs-keyword">let</span> add = curry(<span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> args.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b)
&#125;)</code></pre>

<h3 id="äº‹ä»¶å¾ªç¯æœºåˆ¶"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶</h3><blockquote>
<p>Node/æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯æœºåˆ¶</p>
</blockquote>
<p>å®ä»»åŠ¡é˜Ÿåˆ—/å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>Nodeäº‹ä»¶å¾ªç¯æœ‰6ä¸ªé˜¶æ®µã€‚6ä¸ªé˜¶æ®µæŒ‰ç…§é¡ºåºåå¤æ‰§è¡Œã€‚</p>
<p><code>timers</code>é˜¶æ®µæ‰§è¡Œ<code>timer(setTimeout/setInterval)</code>å›è°ƒã€‚</p>
<p><code>I/O callbacks</code>é˜¶æ®µå¤„ç†ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘æ•°æœªæ‰§è¡Œçš„<code>I/O</code>å›è°ƒã€‚</p>
<p><code>idle,prepare</code>é˜¶æ®µä»…<code>node</code>å†…éƒ¨ä½¿ç”¨ã€‚</p>
<p><code>poll</code>é˜¶æ®µè·å–æ–°çš„<code>I/O</code>äº‹ä»¶ï¼Œé€‚å½“çš„æ¡ä»¶ä¸‹<code>node</code>å°†é˜»å¡ã€‚</p>
<p><code>check</code>é˜¶æ®µæ‰§è¡Œ<code>setImmediate()</code>çš„å›è°ƒã€‚</p>
<p><code>close callbacks</code>é˜¶æ®µæ‰§è¡Œ<code>socket</code>çš„<code>close</code>äº‹ä»¶å›è°ƒã€‚</p>
<p>Nodeç«¯ï¼Œå¾®ä»»åŠ¡åœ¨äº‹ä»¶å¾ªç¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œã€‚</p>
<p>æµè§ˆå™¨ç«¯ï¼Œå¾®ä»»åŠ¡åœ¨äº‹ä»¶å¾ªç¯çš„å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œã€‚</p>
<h3 id="ç±»æ•°ç»„"><a href="#ç±»æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„"></a>ç±»æ•°ç»„</h3><blockquote>
<p>ç±»æ•°ç»„å’Œæ•°ç»„çš„åŒºåˆ«</p>
</blockquote>
<p>ç±»æ•°ç»„æ‹¥æœ‰<code>length</code>å±æ€§ï¼Œä½†ä¸èƒ½ç›´æ¥è°ƒç”¨æ•°ç»„æ–¹æ³•ã€‚</p>
<p>ç±»æ•°ç»„å¯ä»¥é€šè¿‡<code>Array.from</code>/<code>Foreach</code>å±æ€§éå†ç»„æˆæ–°æ•°ç»„/<code>slice.call</code>è½¬æ¢ä¸ºæ•°ç»„ã€‚</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><code>Promise</code>ä¸‰ç§çŠ¶æ€ï¼š<code>pendingè¿›è¡Œä¸­</code>ï¼Œ<code>fulfilledå·²æˆåŠŸ</code>ï¼Œ<code>rejectedå·²å¤±è´¥</code>ã€‚</p>
<p><code>Promise.all()</code>å°†å¤šä¸ª<code>promise</code>å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ï¼Œæ¥å—ç”±<code>Promise</code>å¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°ã€‚</p>
<p><code>Promise.race()</code>æ¥å—ç”±<code>Promise</code>å¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå‚æ•°ä¸­åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€å°±ä¼šå°†è¯¥å®ä¾‹çš„çŠ¶æ€ä¼ ç»™<code>Promise.race()</code>ï¼Œä¸”å…¶è¿”å›å€¼ä½œä¸ºæ–°<code>Promise</code>å®ä¾‹è¿”å›å€¼è¿”å›ã€‚</p>
<p><code>Promise.resolve()</code>å°†ç°æœ‰å¯¹è±¡è½¬ä¸º<code>Promise</code>å¯¹è±¡ã€‚å¦‚æœæ–¹æ³•å‚æ•°ä¸º<code>Promise</code>å¯¹è±¡ï¼Œä¸åšä»»ä½•å¤„ç†ï¼›å¦‚æœæ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„<code>thenable</code>å¯¹è±¡ï¼Œè½¬ä¸º<code>Promise</code>å¯¹è±¡åç«‹å³æ‰§è¡Œ<code>then</code>æ–¹æ³•ï¼›å¦‚æœæ˜¯åŸå§‹å€¼æˆ–ä¸å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œè¿”å›æ–°çš„<code>Promise</code>å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œå‚æ•°ä½œä¸º<code>then</code>æ–¹æ³•ä¸­<code>onResolved</code>å›è°ƒå‡½æ•°çš„å‚æ•°ï¼›ä¸å¸¦å‚æ•°åˆ™ç›´æ¥è¿”å›<code>fulfilled</code>çŠ¶æ€çš„æ–°çš„<code>Promise</code>å¯¹è±¡ã€‚</p>
<p><code>Promise</code>å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±ï¼ŒåŒ…å«äº†æ›´å¥½çš„é”™è¯¯å¤„ç†æ–¹å¼ã€‚</p>
<p><code>Promise</code>æ— æ³•ä¸­é€”å–æ¶ˆï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°æ— æ³•åæ˜ å†…éƒ¨é”™è¯¯ã€‚</p>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myPromise</span>(<span class="hljs-params">fn</span>) </span>&#123;
  <span class="hljs-keyword">let</span> _this = <span class="hljs-built_in">this</span>
  _this.status = <span class="hljs-string">&#x27;pending&#x27;</span>
  _this.value = <span class="hljs-literal">undefined</span>
  _this.reason = <span class="hljs-literal">undefined</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span>(<span class="hljs-params">value</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (_this.status === <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;
      _this.value = value
      _this.status = <span class="hljs-string">&#x27;resolved&#x27;</span>
    &#125;
  &#125;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reject</span>(<span class="hljs-params">value</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (_this.status === <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;
      _this.status = <span class="hljs-string">&#x27;rejected&#x27;</span>
      _this.reason = value
    &#125;
  &#125;
  <span class="hljs-keyword">try</span> &#123;
    fn(resolve, reject)
  &#125; <span class="hljs-keyword">catch</span> (e) &#123;
    reject(e)
  &#125;
  myPromise.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fulfilled, rejected</span>) </span>&#123;
    <span class="hljs-keyword">let</span> _this = <span class="hljs-built_in">this</span>
    <span class="hljs-keyword">switch</span> (_this.status) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;resolved&#x27;</span>:
        fulfilled(_this.value)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;rejected&#x27;</span>:
        rejected(_this.value)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">break</span>
    &#125;
  &#125;
&#125;
<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> myPromise(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
  resolve(<span class="hljs-number">1</span>)
&#125;)
p.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(x)
&#125;)</code></pre>

<pre><code class="hljs js"><span class="hljs-comment">// Promise.all()</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promiseAll</span>(<span class="hljs-params">promises</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(promises)) &#123;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;arguments must be array&#x27;</span>)
    &#125;
    <span class="hljs-keyword">let</span> resolvedCnt = <span class="hljs-number">0</span>,
      resolvedRes = []
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [index, item] <span class="hljs-keyword">of</span> promises.entries()) &#123;
      <span class="hljs-built_in">Promise</span>.resolve(item).then(
        (value) =&gt; &#123;
          resolvedCnt++
          resolvedRes[index] = value
          <span class="hljs-keyword">if</span> (resolvedCnt === promises.length) &#123;
            <span class="hljs-keyword">return</span> resolve(resolvedRes)
          &#125;
        &#125;,
        (error) =&gt; &#123;
          <span class="hljs-keyword">return</span> reject(error)
        &#125;
      )
    &#125;
  &#125;)
&#125;

<span class="hljs-keyword">let</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    resolve(<span class="hljs-number">1</span>)
  &#125;, <span class="hljs-number">1000</span>)
&#125;)
<span class="hljs-keyword">let</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    resolve(<span class="hljs-number">2</span>)
  &#125;, <span class="hljs-number">2000</span>)
&#125;)
<span class="hljs-keyword">let</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    resolve(<span class="hljs-number">3</span>)
  &#125;, <span class="hljs-number">3000</span>)
&#125;)
promiseAll([p3, p1, p2]).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(res) <span class="hljs-comment">// [3, 1, 2]</span>
&#125;)</code></pre>

<h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><blockquote>
<p>æ—¢ç„¶Vueé€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®åœ¨DOMä¸Šçš„å˜åŒ–ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹ŸDOMå‘¢ï¼Ÿ</p>
</blockquote>
<p>å…·å¤‡è·¨å¹³å°çš„ä¼˜åŠ¿ã€‚<code>Virtual DOM</code>æ˜¯ä»¥<code>JavaScript</code>å¯¹è±¡ä¸ºåŸºç¡€è€Œä¸ä¾èµ–çœŸå®å¹³å°ç¯å¢ƒï¼Œæ‰€ä»¥ä½¿å®ƒå…·æœ‰äº†è·¨å¹³å°çš„èƒ½åŠ›ã€‚</p>
<p>å‡å°‘<code>DOM</code>æ“ä½œï¼Œæ˜¾è‘—æé«˜æ€§èƒ½ã€‚</p>
<p>æå‡æ¸²æŸ“æ€§èƒ½ã€‚åœ¨å¤§é‡é¢‘ç¹çš„æ•°æ®æ›´æ–°ä¸‹ï¼Œèƒ½å¤Ÿå¯¹è§†å›¾è¿›è¡Œåˆç†ï¼Œé«˜æ•ˆçš„æ›´æ–°ã€‚</p>
<h3 id="vm-set"><a href="#vm-set" class="headerlink" title="vm.$set()"></a>vm.$set()</h3><blockquote>
<p>Vueä¸ºä»€ä¹ˆè¦ç”¨vm.$set()è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜ï¼Ÿ</p>
</blockquote>
<p>Vueä½¿ç”¨äº†<code>Object.defineProperty</code>å®ç°æ•°æ®çš„åŒå‘ç»‘å®šï¼Œåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ<code>getter/setter</code>è½¬åŒ–ï¼Œå±æ€§å¿…é¡»åœ¨<code>data</code>å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è¿›è¡Œç›‘å¬ï¼Œå› æ­¤<code>Vue</code>æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚</p>
<pre><code class="hljs js">Vue.set(object, propertyName, value)
Vue.set(vm.items, indexOfItem, newValue)</code></pre>

<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set</span>(<span class="hljs-params">target, key, value</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(target)) &#123;
    target.length = <span class="hljs-built_in">Math</span>.max(target.length, key)
    target.splice(key, <span class="hljs-number">1</span>, value)
    <span class="hljs-keyword">return</span> value
  &#125;
  <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> target &amp;&amp; !(key <span class="hljs-keyword">in</span> <span class="hljs-built_in">Object</span>.prototype)) &#123;
    target[key] = value
    <span class="hljs-keyword">return</span> value
  &#125;
  <span class="hljs-keyword">const</span> ob = target.__ob__
  <span class="hljs-comment">// targetä¸æ˜¯å“åº”å¼æ•°æ®ï¼Œç›´æ¥èµ‹å€¼</span>
  <span class="hljs-keyword">if</span> (!ob) &#123;
    target[key] = value
    <span class="hljs-keyword">return</span> value
  &#125;
  <span class="hljs-comment">// å“åº”å¼å¤„ç†</span>
  defineReactive(ob.value, key, value)
  ob.dep.notify()
  <span class="hljs-keyword">return</span> value
&#125;</code></pre>

<h3 id="ç»„ä»¶name"><a href="#ç»„ä»¶name" class="headerlink" title="ç»„ä»¶name"></a>ç»„ä»¶name</h3><blockquote>
<p>Vueç»„ä»¶ä¸­å†™nameé€‰é¡¹é™¤äº†æ­é…keep-aliveè¿˜æœ‰æ­é…å…¶ä»–ä½œç”¨å—ï¼Ÿè°ˆè°ˆå¯¹keep-aliveçš„äº†è§£</p>
</blockquote>
<p>é¡¹ç›®ä¸­ä½¿ç”¨<code>keep-alive</code>æ—¶ï¼Œå¯ä»¥æ­é…<code>name</code>è¿›è¡Œç¼“å­˜è¿‡æ»¤ã€‚</p>
<p><code>DOM</code>åšé€’å½’ç»„ä»¶æ—¶éœ€è¦è°ƒç”¨è‡ªèº«<code>name</code>ã€‚</p>
<p><code>keep-alive</code>æ˜¯<code>Vue</code>å†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿è¢«åŒ…å«çš„ç»„ä»¶ä¿ç•™çŠ¶æ€ï¼Œé¿å…é‡æ–°æ¸²æŸ“ã€‚</p>
<p>æä¾›<code>include</code>å’Œ<code>exclude</code>å±æ€§ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ–å­—ç¬¦ä¸²ã€‚<code>include</code>è¡¨ç¤ºåªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ï¼Œ<code>exclude</code>è¡¨ç¤ºåç§°åŒ¹é…çš„ç»„ä»¶ä¸ä¼šè¢«ç¼“å­˜ã€‚</p>
<p>é¡µé¢ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œé’©å­çš„è§¦å‘é¡ºåº<code>created-&gt;mounted-&gt;activated</code>ï¼Œé€€å‡ºæ—¶è§¦å‘<code>deactivated</code>ï¼Œå½“å†æ¬¡è¿›å…¥æ—¶ï¼Œåªè§¦å‘<code>activated</code>ã€‚äº‹ä»¶æŒ‚è½½çš„æ–¹æ³•ç­‰åªæ‰§è¡Œä¸€æ¬¡çš„æ”¾åœ¨<code>mounted</code>ä¸­ï¼Œç»„ä»¶æ¯æ¬¡è¿›å»æ‰§è¡Œçš„æ–¹æ³•æ”¾åœ¨<code>activated</code>ä¸­ã€‚</p>
<h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><blockquote>
<p>1-100é€’å½’æ±‚å’Œ</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">num</span>) </span>&#123;
  <span class="hljs-keyword">if</span>(num === <span class="hljs-number">1</span> || num === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> num
  <span class="hljs-keyword">return</span> sum(num - <span class="hljs-number">1</span>) + num
&#125;</code></pre>

<h3 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h3><pre><code class="hljs js"><span class="hljs-comment">// 1âƒ£ï¸</span>
<span class="hljs-keyword">var</span> min = <span class="hljs-built_in">Math</span>.min()
<span class="hljs-keyword">var</span> max = <span class="hljs-built_in">Math</span>.max()
<span class="hljs-built_in">console</span>.log(min &lt; max) 
<span class="hljs-comment">// false min = Infinity, max = -Infinity</span>

<span class="hljs-comment">// 2âƒ£ï¸</span>
<span class="hljs-keyword">const</span> person = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;KangXi&#x27;</span> &#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">age</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.name&#125;</span> is <span class="hljs-subst">$&#123;age&#125;</span>`</span>
&#125;
<span class="hljs-built_in">console</span>.log(foo.call(person, <span class="hljs-number">21</span>)) <span class="hljs-comment">// KangXi is 21</span>
<span class="hljs-built_in">console</span>.log(foo.bind(person, <span class="hljs-number">21</span>)) <span class="hljs-comment">// [Function: bound foo]</span>
<span class="hljs-built_in">console</span>.log(foo.bind(person, <span class="hljs-number">21</span>)()) <span class="hljs-comment">// KangXi is 21</span>
<span class="hljs-comment">// bind()å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç»‘å®šå‡½æ•°(bound function, BF)</span>

<span class="hljs-comment">// 3âƒ£ï¸</span>
<span class="hljs-keyword">const</span> num = &#123;
  a: <span class="hljs-number">10</span>,
  add: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.a + <span class="hljs-number">2</span>
  &#125;,
  reduce: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">this</span>.a - <span class="hljs-number">2</span>,
&#125;
<span class="hljs-built_in">console</span>.log(num.add()) <span class="hljs-comment">// 12</span>
<span class="hljs-built_in">console</span>.log(num.reduce()) <span class="hljs-comment">// NaN</span>
<span class="hljs-comment">// ç®­å¤´å‡½æ•°æŒ‡å‘å¤–å±‚è´¹ç®­å¤´å‡½æ•°ï¼Œæ­¤å¤„æ²¡æœ‰ï¼Œåˆ™æŒ‡å‘window</span>

<span class="hljs-comment">// 4âƒ£ï¸</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">return</span> f
&#125;
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> f() <span class="hljs-keyword">instanceof</span> f) <span class="hljs-comment">// false</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;&#125;
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> f() <span class="hljs-keyword">instanceof</span> f) <span class="hljs-comment">// true</span>
<span class="hljs-comment">// a instanceof bç”¨æ¥åˆ¤æ–­aæ˜¯ä¸æ˜¯bçš„å®ä¾‹ï¼Œreturn fè¿”å›çš„æ˜¯fçš„å‡½æ•°å¯¹è±¡ï¼Œå› æ­¤ä¸ºfalse</span>

<span class="hljs-comment">// 5âƒ£ï¸</span>
<span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>
<span class="hljs-keyword">if</span> (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;&#125;) &#123;
  x += <span class="hljs-keyword">typeof</span> f
&#125;
<span class="hljs-built_in">console</span>.log(x) <span class="hljs-comment">// 1undefined</span>
<span class="hljs-comment">// å‡½æ•°å£°æ˜å†™åœ¨è¿ç®—ç¬¦ä¸­ä¸ºtrueï¼Œä½†æ”¾åœ¨è¿ç®—ç¬¦ä¸­çš„å‡½æ•°å£°æ˜åœ¨æ‰§è¡Œé˜¶æ®µæ— æ³•æ‰¾åˆ°ï¼Œå› æ­¤typeofè¿”å›undefined</span>

<span class="hljs-comment">// 6âƒ£ï¸</span>
<span class="hljs-keyword">var</span> foo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> bar) <span class="hljs-comment">// function</span>
&#125;
foo()
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> bar()) <span class="hljs-comment">// bar is not defined</span>
<span class="hljs-comment">// å‘½åå‡½æ•°è¡¨è¾¾å¼å‡½æ•°åªèƒ½åœ¨å‡½æ•°ä½“å†…æœ‰æ•ˆ</span>

<span class="hljs-comment">// 7âƒ£ï¸</span>
<span class="hljs-keyword">var</span> company = &#123; <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;beijing&#x27;</span> &#125;
<span class="hljs-keyword">var</span> bj = <span class="hljs-built_in">Object</span>.create(company)
<span class="hljs-keyword">delete</span> bj.address
<span class="hljs-built_in">console</span>.log(bj, bj.address) <span class="hljs-comment">// &#123;&#125;, beijing</span>
<span class="hljs-comment">// deleteå¯ä»¥åˆ é™¤ï¼šå¯é…ç½®å¯¹è±¡çš„å±æ€§/éšå¼å£°æ˜çš„å…¨å±€å˜é‡/ç”¨æˆ·å®šä¹‰çš„å±æ€§</span>
<span class="hljs-comment">// deleteä¸èƒ½åˆ é™¤çš„ï¼šæ˜¾å¼å£°æ˜çš„å…¨å±€å˜é‡/å†…ç½®å¯¹è±¡çš„å†…ç½®å±æ€§/ç»§æ‰¿å±æ€§</span>

<span class="hljs-comment">// 8âƒ£ï¸</span>
<span class="hljs-keyword">var</span> fullName = <span class="hljs-string">&#x27;a&#x27;</span>
<span class="hljs-keyword">var</span> obj = &#123;
  fullName: <span class="hljs-string">&#x27;b&#x27;</span>,
  prop: &#123;
    fullName: <span class="hljs-string">&#x27;c&#x27;</span>,
    getFullName() &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.fullName
    &#125;,
  &#125;,
&#125;
<span class="hljs-built_in">console</span>.log(obj.prop.getFullName()) <span class="hljs-comment">// c</span>
<span class="hljs-keyword">var</span> test = obj.prop.getFullName
<span class="hljs-built_in">console</span>.log(test()) <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// 9âƒ£ï¸</span>
;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> a = (b = <span class="hljs-number">5</span>)
&#125;)()
<span class="hljs-built_in">console</span>.log(b) <span class="hljs-comment">// 5</span>
<span class="hljs-built_in">console</span>.log(a) <span class="hljs-comment">// a is not defined</span>

<span class="hljs-comment">// ğŸ”Ÿ</span>
<span class="hljs-keyword">var</span> a = [<span class="hljs-number">0</span>]
<span class="hljs-keyword">if</span> (a) &#123;
  <span class="hljs-built_in">console</span>.log(a == <span class="hljs-literal">true</span>)
&#125; <span class="hljs-keyword">else</span> &#123;
  <span class="hljs-built_in">console</span>.log(a)
&#125;
<span class="hljs-comment">// false</span>

<span class="hljs-comment">// 1âƒ£ï¸1âƒ£ï¸</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">side</span>(<span class="hljs-params">arr</span>) </span>&#123;
  arr[<span class="hljs-number">0</span>] = arr[<span class="hljs-number">2</span>]
&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">a, b, c = <span class="hljs-number">3</span></span>) </span>&#123;
  c = <span class="hljs-number">10</span>
  <span class="hljs-built_in">console</span>.log(a + b + c)
&#125;
a(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// 12</span></code></pre>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><blockquote>
<p>calc, support, mediaå«ä¹‰åŠç”¨æ³•</p>
</blockquote>
<p><code>@support</code>ä¸»è¦æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒcssçš„æŸä¸ªå±æ€§ã€‚</p>
<p><code>calc</code>å‡½æ•°ç”¨äºåŠ¨æ€è®¡ç®—é•¿åº¦å€¼ã€‚</p>
<p><code>@media</code>æŸ¥è¯¢ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒçš„åª’ä½“ç±»å‹å®šä¹‰ä¸åŒçš„æ ·å¼ã€‚</p>
<blockquote>
<p>æ°´å¹³å±…ä¸­/å‚ç›´å±…ä¸­çš„4ç§å†™æ³•</p>
</blockquote>
<pre><code class="hljs scss">&#123;
  <span class="hljs-comment">// 1âƒ£ï¸</span>
  <span class="hljs-attribute">display</span>: flex;
  jusfify-<span class="hljs-attribute">content</span>: center;
  <span class="hljs-comment">// 2âƒ£ï¸</span>
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-comment">// 3âƒ£ï¸</span>
  <span class="hljs-attribute">position</span>: absolute; 
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: translateX(-<span class="hljs-number">50%</span>)
  // <span class="hljs-number">4</span>âƒ£ï¸
  margin: <span class="hljs-number">0</span> auto;
&#125;

&#123;
  <span class="hljs-comment">// 1âƒ£ï¸</span>
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-comment">// 2âƒ£ï¸</span>
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  transiform: translateY(-<span class="hljs-number">50%</span>);
  <span class="hljs-comment">// 3âƒ£ï¸</span>
  <span class="hljs-attribute">vertical-align</span>: middle;
  <span class="hljs-comment">// 4âƒ£ï¸</span>
  <span class="hljs-attribute">line-height</span>: [height];
&#125;</code></pre>

<blockquote>
<p>1rem/1em/1vh/1pxçš„å«ä¹‰</p>
</blockquote>
<p><code>rem</code>ç›¸å¯¹æ ¹å…ƒç´ ã€‚</p>
<p><code>em</code>ç›¸å¯¹è‡ªèº«æˆ–çˆ¶å…ƒç´ <code>font-size</code>ï¼Œ<code>width/height/padding/margin</code>ç›¸å¯¹è‡ªèº«<code>font-size</code>ã€‚</p>
<p><code>vw/vh</code>è§†å£å®½åº¦/è§†å£é«˜åº¦ã€‚</p>
<blockquote>
<p>ç”»ä¸€æ¡0.5pxçš„ç›´çº¿</p>
</blockquote>
<pre><code class="hljs css">&#123;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scareY</span>(<span class="hljs-number">0.5</span>);
&#125;</code></pre>

<blockquote>
<p>ç›’æ¨¡å‹</p>
</blockquote>
<p><code>W3C</code>æ ‡å‡†ç›’æ¨¡å‹<code>width = content</code></p>
<p><code>IE</code>æ€ªå¼‚ç›’æ¨¡å‹<code>width = content + padding + border</code></p>
<blockquote>
<p>ç”»ä¸€ä¸ªä¸‰è§’å½¢</p>
</blockquote>
<pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">border-style</span>: solid;
  <span class="hljs-attribute">border-color</span>: transparent transparent red transparent;
&#125;</code></pre>

<blockquote>
<p>éå†aèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</p>
</blockquote>
<pre><code class="hljs js"><span class="hljs-keyword">var</span> c = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;.a&#x27;</span>).parentNode.children</code></pre>

<h3 id="ç»„ä»¶data"><a href="#ç»„ä»¶data" class="headerlink" title="ç»„ä»¶data"></a>ç»„ä»¶data</h3><blockquote>
<p>ä¸ºä»€ä¹ˆvueç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°ï¼Ÿ</p>
</blockquote>
<p><code>Object</code>æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå¦‚æœä¸æ˜¯<code>function</code>è¿”å›ï¼Œæ¯ä¸ªæ•°ç»„çš„<code>data</code>éƒ½æ˜¯å†…å­˜çš„åŒä¸€åœ°å€ï¼Œä¸€ä¸ªç»„ä»¶ä¸­çš„æ•°æ®æ”¹å˜ï¼Œå…¶ä»–ç»„ä»¶ä¸­çš„æ•°æ®ä¹Ÿä¼šæ”¹å˜ã€‚</p>
<h3 id="HTTPå’ŒHTTPS"><a href="#HTTPå’ŒHTTPS" class="headerlink" title="HTTPå’ŒHTTPS"></a>HTTPå’ŒHTTPS</h3><p>å› ä¸º<code>http</code>çš„å†…å®¹æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å­˜åœ¨åŠ«æŒã€ç¯¡æ”¹çš„é£é™©ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚</p>
<p>å¦‚æœé‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œé€šä¿¡åŒæ–¹å„è‡ªæŒæœ‰åŒä¸€ä¸ªå¯†é’¥ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å¦‚ä½•è®©å¯†é’¥åªæœ‰ä¼ è¾“åŒæ–¹çŸ¥æ™“ã€‚å¦‚æœç”±æœåŠ¡ç«¯ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½æ³„æ¼å¯†é’¥ï¼Œå› æ­¤éœ€è¦éå¯¹ç§°åŠ å¯†ã€‚</p>
<p>å®¢æˆ·ç«¯æ‹¥æœ‰å…¬é’¥ç§é’¥ï¼ŒæœåŠ¡ç«¯æ‹¥æœ‰å…¬é’¥ç§é’¥ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åˆ†åˆ«å°†å„è‡ªçš„å…¬é’¥ä¼ è¾“ç»™å¯¹æ–¹ã€‚ä¹‹åçš„æ•°æ®ä¼ è¾“å‡ç”¨å¯¹æ–¹çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œç”¨è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åŒå‘ä¼ è¾“å®‰å…¨ã€‚ä½†æ˜¯éå¯¹ç§°ç®—æ³•éå¸¸è€—æ—¶ï¼Œå› æ­¤éå¯¹ç§°åŠ å¯†+å¯¹ç§°åŠ å¯†ç»“åˆï¼Œè€Œä¸”å°½é‡å‡å°‘éå¯¹ç§°åŠ å¯†çš„æ¬¡æ•°ã€‚</p>
<p>æœåŠ¡ç«¯æ‹¥æœ‰å…¬é’¥ç§é’¥ï¼ŒæœåŠ¡ç«¯å°†å…¬é’¥ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ç”¨ä»¥ç”Ÿæˆç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œå¹¶ä½¿ç”¨å…¬é’¥åŠ å¯†åä¼ è¾“ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç§é’¥è§£å¯†åè·å¾—å¯†é’¥ï¼Œç”±æ­¤åŒæ–¹å‡è·å¾—å¯†é’¥ï¼Œä¸”æ•°æ®å®‰å…¨ã€‚ä¹‹åæ•°æ®ä¼ è¾“å‡ä½¿ç”¨å¯†é’¥åŠ è§£å¯†ã€‚</p>
<p><code>https</code>å³é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œç„¶åè¿™ç§æ–¹å¼å­˜åœ¨ä¸­é—´äººæ”»å‡»ã€‚</p>
<p>å¦‚æœä¸­é—´äººåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ï¼Œå½¢æˆå®¢æˆ·ç«¯-ä¸­é—´äºº-æœåŠ¡ç«¯å½¢å¼ã€‚å°±èƒ½è·å–æœåŠ¡ç«¯çš„å…¬é’¥å¹¶æ›¿æ¢æˆè‡ªå·±çš„å…¬é’¥ï¼Œä»è€Œéª—å–å®¢æˆ·ç«¯çš„å‡å…¬é’¥åŠ å¯†çš„å¯†é’¥ï¼Œåˆ©ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†åè·å–å¯†é’¥ï¼Œå†ä½¿ç”¨çœŸå…¬é’¥åŠ å¯†åä¼ è¾“ç»™æœåŠ¡ç«¯ï¼Œè¿™æ ·åœ¨åŒæ–¹éƒ½æ— å¼‚å¸¸çš„æƒ…å†µä¸‹è·å¾—å¯†é’¥ã€‚</p>
<p>æ ¹æœ¬åŸå› åœ¨äºå®¢æˆ·ç«¯æ— æ³•è¯†åˆ«å…¬é’¥çœŸå‡ã€‚å› æ­¤éœ€è¦ä¸€ä»½ç”±CAæœºæ„é¢å‘çš„æ•°å­—è¯ä¹¦ï¼ŒæœåŠ¡å™¨ç›´æ¥è¿”å›æ•°å­—è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ç›´æ¥ä»æ•°å­—è¯ä¹¦ä¸­è·å–å…¬é’¥ã€‚</p>
<p>åŒæ—¶å°†æ•°å­—è¯ä¹¦å†…å®¹ç”Ÿæˆç­¾åï¼Œé€šè¿‡å¯¹æ¯”è¯ä¹¦å†…å®¹å’Œç­¾åï¼Œå°±èƒ½ç¡®ä¿è¯ä¹¦æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚æ˜æ–‡å’Œæ•°å­—ç­¾åå…±åŒç»„æˆæ•°å­—è¯ä¹¦ã€‚</p>
<p>é€šè¿‡å¯¹æ˜æ–‡è¿›è¡Œ<code>hash</code>ï¼Œå¹¶ä½¿ç”¨ç§é’¥ç”Ÿæˆæ•°å­—ç­¾åã€‚ä½¿ç”¨å…¬é’¥è¿›è¡Œè§£å¯†ï¼Œå¹¶å¯¹æ˜æ–‡è¿›è¡Œ<code>hash</code>ï¼Œæ¯”è¾ƒç­¾åå’Œå“ˆå¸Œç»“æœæ˜¯å¦ç›¸åŒï¼Œç¡®è®¤è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</p>
<h3 id="ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹</h3><p>TCPæ˜¯é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<p>ä¸€å¯¹ä¸€è¿æ¥ï¼Œä¿è¯ä¸€ä¸ªæŠ¥æ–‡ä¸€å®šèƒ½å¤Ÿåˆ°è¾¾æ¥æ”¶ç«¯ï¼Œæ¶ˆæ¯æ— è¾¹ç•Œã€æœ‰åºï¼Œæ— è®ºæ¶ˆæ¯å¤šå¤§éƒ½å¯ä»¥è¿›è¡Œä¼ è¾“ï¼Œå¯¹é‡å¤æŠ¥æ–‡è‡ªåŠ¨ä¸¢å¼ƒã€‚</p>
<center> 
  <img src="/img/TCP+UDP.jpg" srcset="/img/loading.gif"> 
  <div style="display: inline-block; color: #afb2b5; padding: 15px; font-size: 0.9rem;">
    TCP VS UDP.jpg
  </div> 
</center>

<p>TCP VS UDP</p>
<p><code>TCP</code>æ˜¯é¢å‘è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¼ è¾“æ•°æ®å‰å…ˆè¦å»ºç«‹è¿æ¥ã€‚<code>UDP</code>ä¸éœ€è¦è¿æ¥ï¼Œå³åˆ»ä¼ è¾“æ•°æ®ã€‚</p>
<p><code>TCP</code>æ˜¯ä¸€å¯¹ä¸€çš„ä¸¤ç‚¹æœåŠ¡ï¼Œä¸€æ¡è¿æ¥è¿æ¥ä¸¤ä¸ªç«¯ç‚¹ã€‚<code>UDP</code>æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚</p>
<p><code>TCP</code>æ˜¯å¯é äº¤ä»˜æ•°æ®çš„ï¼Œæ•°æ®å¯ä»¥æ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰éœ€åˆ°è¾¾ã€‚<code>UDP</code>å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä¸ä¿è¯äº¤ä»˜æ•°æ®ã€‚</p>
<p><code>TCP</code>æœ‰æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶æœºåˆ¶ï¼Œä¿è¯æ•°æ®ä¼ è¾“å®‰å…¨æ€§ã€‚<code>UDP</code>å³ä½¿ç½‘ç»œæ‹¥å µä¸ä¼šå½±å“<code>UDP</code>å‘é€é€Ÿç‡ã€‚</p>
<p><code>TCP</code>æ˜¯æµå¼ä¼ è¾“ï¼Œæ²¡æœ‰è¾¹ç•Œä½†ä¿è¯é¡ºåºå’Œå¯é ã€‚<code>UDP</code>æŒ‰åŒ…å‘é€ï¼Œæœ‰è¾¹ç•Œå¯èƒ½ä¸¢åŒ…å’Œä¹±åºã€‚</p>
<p><code>TCP</code>å¸¸ç”¨äºFTPæ–‡ä»¶ä¼ è¾“ã€<code>HTTPS</code>ã€‚<code>UDP</code>å¸¸ç”¨äº<code>DNS</code>ã€è§†é¢‘éŸ³é¢‘ç­‰å¤šåª’ä½“é€šä¿¡ã€å¹¿æ’­é€šä¿¡ã€‚</p>
<p><code>TCP</code>ç¬¬ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®ï¼Œå‰ä¸¤æ¬¡æ¡æ‰‹ä¸èƒ½æºå¸¦æ•°æ®ã€‚</p>
<p>ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥é˜»æ­¢é‡å¤å†å²è¿æ¥ï¼ˆåºåˆ—å·è¿‡æœŸæˆ–è¶…æ—¶ï¼‰çš„åˆå§‹åŒ–ï¼ŒåŒæ­¥åŒæ–¹çš„åˆå§‹åºåˆ—å·ï¼Œé¿å…èµ„æºæµªè´¹ã€‚</p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h4><center> 
  <img src="/img/ä¸‰æ¬¡æ¡æ‰‹.jpg" srcset="/img/loading.gif"> 
  <div style="display: inline-block; color: #afb2b5; padding: 15px; font-size: 0.9rem;">
    ä¸‰æ¬¡æ¡æ‰‹.jpg
  </div> 
</center>

<p>ä¸€å¼€å§‹ï¼ŒåŒæ–¹éƒ½å¤„äº<code>CLOSED</code>çŠ¶æ€ã€‚é¦–å…ˆæœåŠ¡ç«¯ä¸»åŠ¨ç›‘å¬æŸä¸ªç«¯å£ï¼Œå¤„äº<code>LISTEN</code>çŠ¶æ€ã€‚</p>
<p>å®¢æˆ·ç«¯éšæœºåˆå§‹åŒ–<code>client_isn</code>ï¼ŒåŒæ—¶å°†<code>SYN</code>æ ‡å¿—ä¸º<code>1</code>ï¼Œå¹¶ä¸”å‘é€ç»™æœåŠ¡ç«¯ï¼Œè¡¨ç¤ºå‘æœåŠ¡ç«¯å‘èµ·è¿æ¥ï¼Œè¯¥æŠ¥æ–‡ä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ï¼Œä¹‹åå®¢æˆ·ç«¯å¤„äº<code>SYN-SENT</code>çŠ¶æ€ã€‚</p>
<p>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯SYNæŠ¥æ–‡åï¼Œåˆå§‹åŒ–åºå·<code>server_isn</code>ï¼Œå¡«å…¥åºå·<code>Seq</code>ï¼ŒåŒæ—¶ç¡®è®¤åº”ç­”å·<code>Ack</code>å¡«å…¥<code>client_isn + 1</code>ï¼Œæ¥ç€<code>SYN</code>å’Œ<code>ACK</code>æ ‡è¯†ä¸º<code>1</code>ï¼Œéšåå‘ç»™å®¢æˆ·ç«¯ï¼Œè¯¥æŠ¥æ–‡ä¹Ÿä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ï¼Œä¹‹åæœåŠ¡ç«¯å¤„äº<code>SYN_RCVD</code>çŠ¶æ€ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯æŠ¥æ–‡åï¼Œè¿˜è¦å›åº”æœ€åä¸€ä¸ªåº”ç­”æŠ¥æ–‡ï¼Œ<code>ACK</code>æ ‡è¯†ä¸º<code>1</code>ï¼Œç¡®è®¤åº”ç­”å·<code>Ack</code>å¡«å…¥<code>server_isn + 1</code>ï¼Œæœ€åæŠ¥æ–‡å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæŠ¥æ–‡å¯ä»¥æºå¸¦å®¢æˆ·åˆ°æœåŠ¡ç«¯çš„æ•°æ®ï¼Œä¹‹åå®¢æˆ·ç«¯å¤„äº<code>ESTABLISHED</code>çŠ¶æ€ã€‚<br>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯åº”ç­”æŠ¥æ–‡åï¼Œè¿›å…¥<code>ESTABLISHED</code>çŠ¶æ€ã€‚</p>
<p>ä¸‰æ¬¡æ¡æ‰‹é¿å…å†å²è¿æ¥ã€‚åœ¨å®¢æˆ·ç«¯å¤šæ¬¡å‘é€SYNå»ºç«‹è¿æ¥ä¸”ç½‘ç»œæ‹¥å µæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ—§çš„SYNæ¯”æ–°çš„SYNå…ˆåˆ°è¾¾æœåŠ¡ç«¯ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å›ä»¥<code>SYN + ACK</code>æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ ¹æ®è‡ªèº«ä¸Šä¸‹æ–‡ï¼Œåˆ¤æ–­è¯¥è¿æ¥è¿‡æœŸæˆ–è¶…æ—¶ï¼Œå‘é€<code>RST</code>ä¸­æ­¢è¿æ¥ã€‚</p>
<p>ä¸¤æ¬¡æ¡æ‰‹æ— æ³•åˆ¤æ–­å½“å‰è¿æ¥æ˜¯å¦æ˜¯å†å²è¿æ¥ï¼Œä¸‰æ¬¡æ¡æ‰‹åˆ™æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡åˆ¤æ–­å½“å‰è¿æ¥æ˜¯å¦æ˜¯å†å²è¿æ¥ã€‚</p>
<p>åŒæ—¶ä¸¤æ¬¡æ¡æ‰‹ç”±äºæœåŠ¡ç«¯æ— æ³•ç¡®è®¤å®¢æˆ·ç«¯æ˜¯å¦æ”¶åˆ°è‡ªå·±å‘é€çš„å»ºç«‹è¿æ¥çš„<code>ACK</code>ç¡®è®¤ä¿¡å·ï¼Œå› æ­¤æ¯æ¬¡æ”¶åˆ°<code>SYN</code>æ—¶åªèƒ½ä¸»åŠ¨å…ˆå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œè¿™ä¼šé€ æˆå»ºç«‹å¤šä¸ªå†—ä½™çš„æ— æ•ˆè¿æ¥ï¼Œé€ æˆä¸å¿…è¦çš„èµ„æºæµªè´¹ã€‚</p>
<h4 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h4><center> 
  <img src="/img/å››æ¬¡æŒ¥æ‰‹.jpg" srcset="/img/loading.gif"> 
  <div style="display: inline-block; color: #afb2b5; padding: 15px; font-size: 0.9rem;">
    å››æ¬¡æŒ¥æ‰‹.jpg
  </div> 
</center>

<p>å®¢æˆ·ç«¯æ‰“ç®—å…³é—­è¿æ¥ï¼Œå‘é€æ ‡è¯†ä¸º<code>1</code>çš„<code>FIN</code>æŠ¥æ–‡ï¼Œä¹‹åå®¢æˆ·ç«¯è¿›å…¥<code>FIN_WAIT_1</code>çŠ¶æ€ã€‚</p>
<p>æœåŠ¡ç«¯æ”¶åˆ°æŠ¥æ–‡åï¼Œå‘é€<code>ACK</code>åº”ç­”æŠ¥æ–‡ï¼Œæ¥ç€æœåŠ¡ç«¯è¿›å…¥<code>CLOSED_WAIT</code>çŠ¶æ€ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°<code>ACK</code>åº”ç­”æŠ¥æ–‡åï¼Œè¿›å…¥<code>FIN_WAIT_2</code>çŠ¶æ€ã€‚</p>
<p>æœåŠ¡ç«¯å¤„ç†å®Œæ•°æ®åï¼Œå‘é€<code>FIN</code>æŠ¥æ–‡ï¼Œä¹‹åæœåŠ¡ç«¯è¿›å…¥<code>LAST_ACK</code>çŠ¶æ€ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„<code>FIN</code>æŠ¥æ–‡ï¼Œå›<code>ACK</code>åº”ç­”æŠ¥æ–‡ï¼Œä¹‹åè¿›å…¥<code>TIME_WAIT</code>çŠ¶æ€ã€‚</p>
<p>æœåŠ¡ç«¯æ”¶åˆ°<code>ACK</code>åº”ç­”æŠ¥æ–‡åï¼Œè¿›å…¥<code>CLOSED</code>çŠ¶æ€ï¼Œè‡³æ­¤æœåŠ¡ç«¯å®Œæˆè¿æ¥çš„å…³é—­ã€‚</p>
<p>å®¢æˆ·ç«¯ç»è¿‡<code>2MSL</code>æ—¶é—´åï¼Œè‡ªåŠ¨è¿›å…¥<code>CLOSED</code>çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å®Œæˆè¿æ¥çš„å…³é—­ã€‚</p>
<p>ä¸»åŠ¨å…³é—­è¿æ¥çš„ï¼Œæ‰æœ‰<code>TIME_WAIT</code>çŠ¶æ€ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆæŒ¥æ‰‹éœ€è¦å››æ¬¡ï¼Ÿ</p>
</blockquote>
<p>å…³é—­è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€<code>FIN</code>æ—¶ï¼Œä»…ä»…ä»£è¡¨å®¢æˆ·ç«¯ä¸å†å‘é€æ•°æ®äº†ä½†è¿˜èƒ½æ¥æ”¶æ•°æ®ã€‚æœåŠ¡ç«¯æ¥æ”¶<code>FIN</code>æŠ¥æ–‡åï¼Œå…ˆå›<code>ACK</code>åº”ç­”æŠ¥æ–‡ï¼Œè€ŒæœåŠ¡ç«¯å¯èƒ½è¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†å‘é€ï¼Œå½“æœåŠ¡ç«¯ä¸å†éœ€è¦å‘é€æ•°æ®æ—¶ï¼Œå‘é€<code>FIN</code>æŠ¥æ–‡åŒæ„å…³é—­è¿æ¥ã€‚</p>
<p><code>MSL</code>æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œæ˜¯ä»»ä½•æŠ¥æ–‡åœ¨ç½‘ç»œä¸Šå­˜åœ¨çš„æœ€é•¿æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æŠ¥æ–‡å°†è¢«ä¸¢å¼ƒã€‚</p>
<p><code>TIME_WAIT = 2MSL</code>ã€‚ç½‘ç»œä¸­å¯èƒ½å­˜åœ¨æ¥è‡ªå‘é€æ–¹çš„æ•°æ®åŒ…ï¼Œå½“å‘é€æ–¹çš„æ•°æ®åŒ…è¢«æ¥æ”¶æ–¹å¤„ç†ååˆä¼šå‘å‘é€æ–¹å‘é€å“åº”ï¼Œä¸€æ¥ä¸€å›éœ€è¦<code>2</code>å€æ—¶é—´ã€‚</p>
<p>æ¯”å¦‚è¢«åŠ¨å…³é—­æ–¹æ²¡æœ‰æ”¶åˆ°æ–­å¼€è¿æ¥çš„æœ€åçš„<code>ACK</code>æŠ¥æ–‡ï¼Œè§¦å‘è¶…æ—¶é‡å‘<code>FIN</code>æŠ¥æ–‡ï¼Œå¦ä¸€æ–¹æ¥æ”¶åˆ°<code>FIN</code>åï¼Œé‡å‘<code>ACK</code>ç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œä¸€æ¥ä¸€å»æ­£å¥½<code>2</code>ä¸ª<code>MSL</code>ã€‚</p>
<p><code>2MSL</code>ä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°<code>FIN</code>åå‘é€<code>ACK</code>å¼€å§‹è®¡æ—¶çš„ã€‚å¦‚æœåœ¨<code>TIME_WAIT</code>æ—¶é—´å†…ï¼Œå› ä¸ºå®¢æˆ·ç«¯<code>ACK</code>æ²¡æœ‰ä¼ è¾“åˆ°æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°é‡å‘<code>FIN</code>ï¼Œé‚£ä¹ˆ<code>2MSL</code>å°†ä¼šé‡æ–°è®¡æ—¶ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦<code>TIME_WAIT</code>ï¼Ÿ</p>
</blockquote>
<p>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…ã€‚ç»è¿‡<code>2MSL</code>æ—¶é—´ï¼Œè¶³ä»¥è®©ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®åŒ…éƒ½è¢«ä¸¢å¼ƒï¼Œä½¿å¾—åŸæ¥è¿æ¥çš„æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­éƒ½è‡ªç„¶æ¶ˆå¤±ï¼Œå†å‡ºç°çš„æ•°æ®åŒ…ä¸€å®šæ˜¯æ–°å»ºç«‹è¿æ¥æ‰€äº§ç”Ÿçš„ã€‚ä¿è¯è¿æ¥æ­£ç¡®å…³é—­ã€‚<code>TIME_WAIT</code>ä½œç”¨æ˜¯ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿æœ€åçš„<code>ACK</code>èƒ½è®©å…³é—­æ–¹æ¥æ”¶ï¼Œä»è€Œå¸®åŠ©å…¶æ­£å¸¸å…³é—­ã€‚</p>
<blockquote>
<p>ä¸‰æ¬¡æ¡æ‰‹ç¬¬ä¸‰æ¬¡å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>
<p>å¦‚æœç¬¬ä¸‰æ¬¡æ¡æ‰‹å¤±è´¥ï¼Œå³å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨è¿”å›äº†<code>ACK</code>ï¼Œä½†æœåŠ¡å™¨å¹¶ä¸èƒ½æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡ã€‚æœåŠ¡å™¨å°†å¯åŠ¨è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œè¶…è¿‡è§„å®šæ—¶é—´åé‡æ–°å‘èµ·ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œå‘å®¢æˆ·ç«¯å‘èµ·<code>SYN + ACK</code>ï¼Œé‡ä¼ æ¬¡æ•°é»˜è®¤ä¸º<code>5</code>æ¬¡ã€‚å¦‚æœé‡ä¼ æ¬¡æ•°åˆ°äº†åä»ç„¶æ²¡æœ‰æ”¶åˆ°<code>ACK</code>åº”ç­”ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´åï¼ŒæœåŠ¡ç«¯è‡ªåŠ¨å…³é—­è¿æ¥ã€‚å½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å†™æ•°æ®æ—¶ï¼ŒæœåŠ¡ç«¯å°†å›åº”<code>RST</code>ï¼Œå¼ºåˆ¶å…³é—­<code>TCP</code>è¿æ¥ï¼Œé˜²æ­¢<code>SYN</code>æ”»å‡»ã€‚</p>
<h4 id="SYNæ”»å‡»"><a href="#SYNæ”»å‡»" class="headerlink" title="SYNæ”»å‡»"></a>SYNæ”»å‡»</h4><p>æ”»å‡»è€…çŸ­æ—¶é—´å†…ä¼ªé€ ä¸åŒ<code>IP</code>åœ°å€çš„<code>SYN</code>æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ¯æ¥æ”¶åˆ°ä¸€ä¸ª<code>SYN</code>æŠ¥æ–‡ï¼Œè¿›å…¥<code>SYN_RCVD</code>çŠ¶æ€ï¼Œä½†æœåŠ¡å™¨å‘å‡ºçš„<code>SYN + ACK</code>æŠ¥æ–‡ï¼Œæ— æ³•å¾—åˆ°æœªçŸ¥<code>IP</code>ä¸»æœºçš„<code>ACK</code>åº”ç­”ï¼Œä¹…è€Œä¹…ä¹‹å°±ä¼šå æ»¡æœåŠ¡ç«¯çš„<code>SYN</code>æ¥æ”¶é˜Ÿåˆ—ï¼ˆæœªè¿æ¥é˜Ÿåˆ—ï¼‰ï¼Œä½¿å¾—æœåŠ¡å™¨æ— æ³•ä¸ºç”¨æˆ·æ­£å¸¸æœåŠ¡ã€‚</p>
<p>æ­£å¸¸æµç¨‹æ—¶æœåŠ¡ç«¯æ¥æ”¶å®¢æˆ·ç«¯<code>SYN</code>æŠ¥æ–‡ï¼ŒåŠ å…¥<code>SYN</code>é˜Ÿåˆ—ï¼Œè¿”å›<code>SYN + ACK</code>ï¼Œç­‰å¾…å®¢æˆ·ç«¯å›åº”<code>ACK</code>æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ¥æ”¶<code>ACK</code>æŠ¥æ–‡åï¼Œä»<code>SYN</code>é˜Ÿåˆ—ç§»é™¤æ”¾å…¥<code>Accept</code>é˜Ÿåˆ—ï¼Œåº”ç”¨é€šè¿‡è°ƒç”¨<code>accept()</code> <code>socket</code>æ¥å£ï¼Œå–å‡ºè¿æ¥ã€‚</p>
<p>åº”ç”¨ç¨‹åºè¿‡æ…¢ï¼Œå°†å¯¼è‡´<code>Accept</code>é˜Ÿåˆ—è¢«å æ»¡ã€‚</p>
<p>æ”¶åˆ°<code>SYN</code>æ”»å‡»ï¼Œå°†å¯¼è‡´<code>SYN</code>é˜Ÿåˆ—è¢«å æ»¡ã€‚</p>
<p>å…¶ä¸­ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œä¿®æ”¹<code>LINUX</code>å†…æ ¸å‚æ•°ï¼Œæ§åˆ¶é˜Ÿåˆ—å¤§å°å’Œé˜Ÿåˆ—æ»¡æ—¶å¤„ç†ã€‚</p>
<p>å…¶äºŒè§£å†³æ–¹æ³•ï¼Œå½“<code>SYN</code>é˜Ÿåˆ—æ»¡åï¼Œååº<code>SYN</code>åŒ…ä¸è¿›å…¥<code>SYN</code>é˜Ÿåˆ—ï¼Œè®¡ç®—å‡º<code>cookie</code>å€¼ï¼Œä»¥<code>Seq = SYN + ACK</code>è¿”å›å®¢æˆ·ç«¯ï¼Œåœ¨æ¥æ”¶åˆ°<code>ACK</code>åº”ç­”æŠ¥æ–‡æ—¶ï¼Œæ£€æŸ¥<code>ACK</code>åˆç†æ€§ï¼Œåˆæ³•<code>ACK</code>æ”¾å…¥<code>Accept</code>é˜Ÿåˆ—ï¼Œæœ€ååº”ç”¨è°ƒç”¨<code>accept()</code>  <code>socket</code>æ¥å£ï¼Œä»<code>Accept</code>é˜Ÿåˆ—å–å‡ºè¿æ¥ã€‚</p>
<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><blockquote>
<p>fetchå‘é€ä¸¤æ¬¡è¯·æ±‚çš„åŸå› </p>
</blockquote>
<p><code>CORS</code>è·¨åŸŸï¼Œæœ‰ä¸¤ç§ä¸åŒçš„è¯·æ±‚ç±»å‹ã€‚ç®€å•è·¨åŸŸè¯·æ±‚å’Œå¤æ‚è·¨åŸŸè¯·æ±‚ï¼ˆå¸¦é¢„æ£€çš„è·¨åŸŸè¯·æ±‚ï¼‰ã€‚</p>
<p>ç®€å•è·¨åŸŸè¯·æ±‚ï¼š</p>
<p>1.<code>HTTP</code>æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼š<code>HEAD</code>/<code>GET</code>/<code>POST</code></p>
<p>2.<code>HTTP</code>çš„å¤´ä¿¡æ¯ä¸è¶…è¿‡ä»¥ä¸‹å‡ ç§å­—æ®µï¼š<code>Accept</code>ã€<code>Accept-Language</code>ã€<code>Content-Language</code>ã€<code>Last-Event-ID</code>ã€<code>Content-Type</code>ï¼ˆé™å®šï¼š<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code>ï¼‰</p>
<p>ä»»ä½•ä¸æ»¡è¶³ç®€å•è·¨åŸŸè¯·æ±‚è¦æ±‚çš„è¯·æ±‚ï¼Œéƒ½è¢«è®¤ä¸ºæ˜¯å¤æ‚è¯·æ±‚ï¼Œä¹Ÿè¢«ç§°ä½œå¸¦é¢„æ£€çš„è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>é¢„è¯·æ±‚ä»¥OPTIONSå½¢å¼å‘é€ï¼ŒåŒ…å«ä¸¤é¡¹CORSç‰¹æœ‰å†…å®¹ã€‚</p>
<p><code>Access-Control-Request-Method</code>ã€<code>Access-Control-Request-Headers</code>ã€‚</p>
<p>é¢„æ£€è¯·æ±‚å®é™…ä¸Šåœ¨ä¸ºä¹‹åçš„å®é™…è¯·æ±‚å‘é€ä¸€ä¸ªæƒé™è¯·æ±‚ï¼Œåœ¨é¢„å›åº”è¿”å›çš„å†…å®¹å½“ä¸­ï¼ŒæœåŠ¡ç«¯åº”å¯¹è¿™ä¸¤é¡¹è¿›è¡Œå›å¤ï¼Œä½¿æµè§ˆå™¨ç¡®å®šè¯·æ±‚æ˜¯å¦èƒ½å¤ŸæˆåŠŸå®Œæˆã€‚ä¸€æ—¦é¢„å›åº”å¦‚æœŸè€Œè‡³ï¼Œæ‰€è¯·æ±‚çš„æƒé™ä¹Ÿéƒ½å·²æ»¡è¶³ï¼Œæ‰ä¼šå‘å‡ºçœŸå®è¯·æ±‚ï¼Œæºå¸¦çœŸå®æ•°æ®ã€‚</p>
<style>
  img:hover {
    border-radius: 0.3125em; 
    box-shadow: 0 0px 15px #2f4154;
  }
</style>


<blockquote>
<p>å‚è€ƒåœ°å€ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6847902225423925255">https://juejin.cn/post/6847902225423925255</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/84212558">https://zhuanlan.zhihu.com/p/84212558</a></p>
<p><a target="_blank" rel="noopener" href="https://www.nowcoder.com/tutorial/96/4700c6f1f3334c9191a38406002efa65">https://www.nowcoder.com/tutorial/96/4700c6f1f3334c9191a38406002efa65</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaolincoding/p/12638546.html">https://www.cnblogs.com/xiaolincoding/p/12638546.html</a></p>
</blockquote>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/vue/">vue</a>
                    
                      <a class="hover-with-bg" href="/tags/js/">js</a>
                    
                      <a class="hover-with-bg" href="/tags/web/">web</a>
                    
                      <a class="hover-with-bg" href="/tags/react/">react</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/12/17/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%982/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">å‰ç«¯é¢è¯•é¢˜2</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/11/20/vue/">
                        <span class="hidden-mobile">vue</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <script type="text/javascript">
    function loadUtterances() {
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'lvqingxiang/lvqingxiang.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', 'github-light');
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    }
    waitElementVisible('comments', loadUtterances)
  </script>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><image src="/img/list.jpg" style="width: 1.5em; height: 1.5em;">
&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div style="font-size: 0.8rem;">
	<span>Â© ç‰ˆæƒæ‰€æœ‰ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„</span>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud ç»Ÿè®¡PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="leancloud-site-pv"></span>
             æ¬¡
          </span>
      
      
        <!-- LeanCloud ç»Ÿè®¡UV -->
        <span id="leancloud-site-uv-container">
            æ€»è®¿å®¢æ•° 
            <span id="leancloud-site-uv"></span>
             äºº
          </span>
      

    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer>
  (function () {
    // æŸ¥è¯¢å­˜å‚¨çš„è®°å½•
    function getRecord(Counter, target) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({target})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {target, time: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    }

    // å‘èµ·è‡ªå¢è¯·æ±‚
    function increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    }

    // æ„å»ºè‡ªå¢è¯·æ±‚ä½“
    function buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "time": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    }

    // æ ¡éªŒæ˜¯å¦ä¸ºæœ‰æ•ˆçš„ UV
    function validUV() {
      var key = 'LeanCloud_UV_Flag';
      var flag = localStorage.getItem(key);
      if (flag) {
        // è·ç¦»æ ‡è®°å°äº 24 å°æ—¶åˆ™ä¸è®¡ä¸º UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    }

    function addCount(Counter) {
      var enableIncr = 'true' === 'true' && window.location.hostname !== 'localhost';
      var getterArr = [];
      var incrArr = [];

      // è¯·æ±‚ PV å¹¶è‡ªå¢
      var pvCtn = document.querySelector('#leancloud-site-pv-container');
      if (pvCtn || enableIncr) {
        var pvGetter = getRecord(Counter, 'site-pv').then((record) => {
          incrArr.push(buildIncrement(record.objectId))
          var ele = document.querySelector('#leancloud-site-pv');
          if (ele) {
            ele.innerText = record.time + 1;
            if (pvCtn) {
              pvCtn.style.display = 'inline';
            }
          }
        });
        getterArr.push(pvGetter);
      }

      // è¯·æ±‚ UV å¹¶è‡ªå¢
      var uvCtn = document.querySelector('#leancloud-site-uv-container');
      if (uvCtn || enableIncr) {
        var uvGetter = getRecord(Counter, 'site-uv').then((record) => {
          var vuv = validUV();
          vuv && incrArr.push(buildIncrement(record.objectId))
          var ele = document.querySelector('#leancloud-site-uv');
          if (ele) {
            ele.innerText = record.time + (vuv ? 1 : 0);
            if (uvCtn) {
              uvCtn.style.display = 'inline';
            }
          }
        });
        getterArr.push(uvGetter);
      }

      // å¦‚æœæ˜¯æ–‡ç« ï¼Œè¯·æ±‚æ–‡ç« çš„æµè§ˆæ•°ï¼Œå¹¶è‡ªå¢
      if ('true' === 'true') {
        var viewCtn = document.querySelector('#leancloud-post-views-container');
        if (viewCtn || enableIncr) {
          var target = decodeURI('/2020/12/01/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/');
          var viewGetter = getRecord(Counter, target).then((record) => {
            incrArr.push(buildIncrement(record.objectId))
            if (viewCtn) {
              var ele = document.querySelector('#leancloud-post-views');
              if (ele) {
                ele.innerText = (record.time || 0) + 1;
                viewCtn.style.display = 'inline';
              }
            }
          });
          getterArr.push(viewGetter);
        }
      }

      // å¦‚æœå¯åŠ¨è®¡æ•°è‡ªå¢ï¼Œæ‰¹é‡å‘èµ·è‡ªå¢è¯·æ±‚
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && increment(Counter, incrArr);
        })
      }
    }

    var app_id = 'TL9peIKTLokMq79j1VjMg7Xf-gzGzoHsz'
    var app_key = '9oeF2MJ3q62GpENO2IqXAdkg'
    var server_url = 'https://tl9peikt.lc-cn-n1-shared.com'

    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': app_id,
            'X-LC-Key': app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };

      addCount(Counter);
    }

    var api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${ app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(resp => resp.json())
        .then(({api_server}) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>






  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>





  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>

















  

  

  

  

  

  

  




</body>
</html>
